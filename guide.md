## Progeressive Web App入门指南

    本文翻译来自https://www.smashingmagazine.com/2016/08/a-beginners-guide-to-progressive-web-apps/。 有兴趣的同学可以点击[阅读原文](https://www.smashingmagazine.com/2016/08/a-beginners-guide-to-progressive-web-apps/)

Progressive web app(PWA)的出现对于移动web开发来说是一件大事。自从Google在2015年推出以来，由于相对简单的开发过程以及在应用的用户体验方面的优势，PWA已经吸引了很多的关注。

PWA使用最新的技术，结合了web和移动应用的各自优势。其实可以想象成使用web技术开发的一个站点但是使用起来却又像个原生的应用。得益于浏览器自身的新特性，service worker提供的功能以及Cache和Push API，开发者可以为PWA应用带来一些强大的功能，比如在主屏幕上安装web应用，接收推送的消息，甚至可以离线运行。

相比于应用市场上的原生app，开发和维护一个web站点会来的更加简单，同时还能拥有更加庞大的web生态系统，各种成熟的插件以及活跃的开发社区的支持。如果你有移动应用和web的开发经验，你就会了解构建一个站点所需要花费的时间更少，同时不用考虑API的向下兼容(所有用户运行的都是相同版本的网站代码，而不像原生应用一样有不同的版本)，而且通常来说这样的web应用更容易发布和维护。

### 为什么要选择Progeressive Web App

有项研究表明，平均来说，在用户从接触一个app到开始使用这个app之前的每一个步骤都会使该app损失20%的用户。用户首先必须从应用市场找到这个app，然后下载，安装，最后打开。然而，当用户找到你开发的PWA应用时，他可以立即开始使用，省去了不必要的下载和安装的过程。当用户返回到应用的时候，会提示他安装该应用，并且可以使用全屏操作来提升体验。

当然，原生应用并不是一无是处。拥有消息推送功能的移动应用比没有推送功能的拥有高达三倍的留存率，也就是说相比于一个站点，用户有三倍的可能性会去重新打开一个移动应用。除此之外，精心设计的移动应用会将一些资源常驻设备，使其使用更少的数据，运行更流畅。

一个PWA应用就利用了移动应用这些好的特性，提升了用户的留存率和应用的性能，同时又不会引入维护一个移动应用的复杂性。

#### 案例

什么时候你需要开发一个PWA应用呢？通常开发原生app是希望用户能够频繁回到app中，其实PWA应用也可以实现同样的效果。[Flipkart](http://www.flipkart.com/)下著名的电子商务平台Flipkart Lite就是一个PWA应用，同样的还有[Air Berlin](https://flights.airberlin.com/en-DE/progressive-web-app)开发的PWA应用，用来作为在线登记流程，允许用户在没有网络的情况下也能查看他们的机票。

当决定下一个应用应该是PWA，web站点或者原生应用时，你首先应该了解并确定对用户来说最重要的操作是什么。要做到“progressive”，一个PWA应用要能保证在所有浏览器中运行，同时当用户的浏览器升级引入新的特性和API的时候，用户体验也能得到提升。

因此，与传统的web站点相比，PWA应用没有在用户体验上作出妥协，但是，你可能要决定哪些功能需要离线支持，你需要提供更方便的导航(记住在独立模式下，用户是无权操作后退按钮的)。如果你的站点已经拥有了原生应用类似的界面，使用progressive web app的理念会使它更加完美。

如果某些功能点对于重要的用户操作是不可或缺的，但是目前又缺少跨浏览器支持的话，开发一个原生的移动应用或许是个更好的选择，这样能保证对于所有用户来说都有相同的用户体验。

### Progeressive Web App的特点

在我们接触具体的代码之前，我们需要了解一下PWA应用拥有的以下这些特点：

**渐进加强(Progressive)**

定义里已经阐述了，一个PWA应用必须保证能在所有的设备上运行，同时根据用户设备和浏览器的特性实现功能的渐进增强。

**可搜索性(Discoverable)**

因为PWA应用本质上是一个web站点，所以可以被搜索引擎搜索到。原生应用在可搜索性上是落后web站点的，这是PWA应用的一个很大的优势。

**可链接化(Linkable)**

这是继承自web站点的另一个特点，设计良好的站点应该使用URI来表示应用当前的状态。当用户将当前web应用保存为书签或者着分享这个URL的时候，该应用可以保持或者重载当前的状态。

**响应式(Responsive)**

PWA应用必须能够适配不同的设备和屏幕尺寸。

**类原生应用(App-like)**

PWA应用应该拥有和原生app类似的界面和体验，同时基于application shell model构建，尽可能减少页面的刷新。

**不依赖网络(Connectivity-independent)**

能够在较差的网络连接或者完全离线状态下运行(最受欢迎的特性)。

**多次使用(Re-engageable)**

原生应用的用户可愿意多次使用他们的app，PWA应用通过使用消息推送等功能也可以达到相同的目的。

**可安装(Installable)**

PWA应用可以安装在设备的主屏上，使其可以随时被使用。

**持续更新(Fresh)**

当新内容发布并且用户处于网络连接状态，app能够实时获取这些内容。

**安全性(Safe)**

因为PWA应用提供了更加亲密的用户体验，并且所有的网络强求都可以被service worker拦截，因此应用必须通过HTTPS访问来防止网络层攻击。